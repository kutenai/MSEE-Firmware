\hypertarget{_hardware_serial_8cpp}{
\section{HardwareSerial.cpp File Reference}
\label{_hardware_serial_8cpp}\index{HardwareSerial.cpp@{HardwareSerial.cpp}}
}
{\ttfamily \#include $<$stdio.h$>$}\par
{\ttfamily \#include $<$stdlib.h$>$}\par
{\ttfamily \#include $<$string.h$>$}\par
{\ttfamily \#include $<$inttypes.h$>$}\par
{\ttfamily \#include $<$avr/io.h$>$}\par
{\ttfamily \#include $<$avr/interrupt.h$>$}\par
{\ttfamily \#include \char`\"{}HardwareSerial.h\char`\"{}}\par
\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structring__buffer}{ring\_\-buffer}
\end{DoxyCompactItemize}
\subsection*{Defines}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{_hardware_serial_8cpp_a739a2a1a0047c98ac1b18ecd25dac092}{RX\_\-BUFFER\_\-SIZE}~128
\item 
\#define \hyperlink{_hardware_serial_8cpp_a16a017d9862dd0b2fae7c5fd9d80780f}{SERIAL\_\-ISR\_\-DEF}(usart)
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{_hardware_serial_8cpp_a686fbf2e87c792a175d8ef37f1464c23}{SERIAL\_\-ISR\_\-DEF} (USARTC0)
\item 
\hyperlink{_hardware_serial_8cpp_a88d300f67c4ffadae9d06355b195dccb}{SERIAL\_\-ISR\_\-DEF} (USARTC1)
\item 
\hyperlink{_hardware_serial_8cpp_adc288ae6c74681e69b1e357926c0a3e9}{SERIAL\_\-ISR\_\-DEF} (USARTD0)
\item 
\hyperlink{_hardware_serial_8cpp_ae92bc09145a7c575c384258f8c165d15}{SERIAL\_\-ISR\_\-DEF} (USARTD1)
\item 
\hyperlink{_hardware_serial_8cpp_acb9cda6603cb216480642b2a6c07b8dc}{SERIAL\_\-ISR\_\-DEF} (USARTE0)
\item 
\hyperlink{_hardware_serial_8cpp_a90ede4720358d6763ec23dc1f88e7d32}{SERIAL\_\-ISR\_\-DEF} (USARTE1)
\item 
\hyperlink{_hardware_serial_8cpp_a9dc131346dc4fc2529d04056dff35e02}{SERIAL\_\-ISR\_\-DEF} (USARTF0)
\item 
\hyperlink{_hardware_serial_8cpp_a6f12703aafce1cd7c9c6a675076e3472}{SERIAL\_\-ISR\_\-DEF} (USARTF1)
\item 
void \hyperlink{_hardware_serial_8cpp_ac661d0ebc0efa48a2b2aed9ccf86aa64}{store\_\-char} (unsigned char c, \hyperlink{structring__buffer}{ring\_\-buffer} $\ast$rx\_\-buffer)
\item 
static void \hyperlink{_hardware_serial_8cpp_aaec4e4f887a958cc22dd447565d7080b}{SetPointer} (USART\_\-t $\ast$usart, \hyperlink{class_hardware_serial}{HardwareSerial} $\ast$p)
\end{DoxyCompactItemize}


\subsection{Define Documentation}
\hypertarget{_hardware_serial_8cpp_a739a2a1a0047c98ac1b18ecd25dac092}{
\index{HardwareSerial.cpp@{HardwareSerial.cpp}!RX\_\-BUFFER\_\-SIZE@{RX\_\-BUFFER\_\-SIZE}}
\index{RX\_\-BUFFER\_\-SIZE@{RX\_\-BUFFER\_\-SIZE}!HardwareSerial.cpp@{HardwareSerial.cpp}}
\subsubsection[{RX\_\-BUFFER\_\-SIZE}]{\setlength{\rightskip}{0pt plus 5cm}\#define RX\_\-BUFFER\_\-SIZE~128}}
\label{_hardware_serial_8cpp_a739a2a1a0047c98ac1b18ecd25dac092}


Definition at line 35 of file HardwareSerial.cpp.



Referenced by HardwareSerial::available(), HardwareSerial::HardwareSerial(), HardwareSerial::read(), and store\_\-char().

\hypertarget{_hardware_serial_8cpp_a16a017d9862dd0b2fae7c5fd9d80780f}{
\index{HardwareSerial.cpp@{HardwareSerial.cpp}!SERIAL\_\-ISR\_\-DEF@{SERIAL\_\-ISR\_\-DEF}}
\index{SERIAL\_\-ISR\_\-DEF@{SERIAL\_\-ISR\_\-DEF}!HardwareSerial.cpp@{HardwareSerial.cpp}}
\subsubsection[{SERIAL\_\-ISR\_\-DEF}]{\setlength{\rightskip}{0pt plus 5cm}\#define SERIAL\_\-ISR\_\-DEF(
\begin{DoxyParamCaption}
\item[{}]{usart}
\end{DoxyParamCaption}
)}}
\label{_hardware_serial_8cpp_a16a017d9862dd0b2fae7c5fd9d80780f}
{\bfseries Value:}
\begin{DoxyCode}
static HardwareSerial*  usart##cp = 0;\
ISR(usart##_RXC_vect) {\
    if (usart##cp) usart##cp->rxc();\
}\
ISR(usart##_DRE_vect) {\
    if (usart##cp) usart##cp->dre();\
}\
ISR(usart##_TXC_vect) {\
    if (usart##cp) usart##cp->txc();\
}
\end{DoxyCode}


Definition at line 45 of file HardwareSerial.cpp.



\subsection{Function Documentation}
\hypertarget{_hardware_serial_8cpp_a686fbf2e87c792a175d8ef37f1464c23}{
\index{HardwareSerial.cpp@{HardwareSerial.cpp}!SERIAL\_\-ISR\_\-DEF@{SERIAL\_\-ISR\_\-DEF}}
\index{SERIAL\_\-ISR\_\-DEF@{SERIAL\_\-ISR\_\-DEF}!HardwareSerial.cpp@{HardwareSerial.cpp}}
\subsubsection[{SERIAL\_\-ISR\_\-DEF}]{\setlength{\rightskip}{0pt plus 5cm}SERIAL\_\-ISR\_\-DEF (
\begin{DoxyParamCaption}
\item[{USARTC0}]{}
\end{DoxyParamCaption}
)}}
\label{_hardware_serial_8cpp_a686fbf2e87c792a175d8ef37f1464c23}
\hypertarget{_hardware_serial_8cpp_a88d300f67c4ffadae9d06355b195dccb}{
\index{HardwareSerial.cpp@{HardwareSerial.cpp}!SERIAL\_\-ISR\_\-DEF@{SERIAL\_\-ISR\_\-DEF}}
\index{SERIAL\_\-ISR\_\-DEF@{SERIAL\_\-ISR\_\-DEF}!HardwareSerial.cpp@{HardwareSerial.cpp}}
\subsubsection[{SERIAL\_\-ISR\_\-DEF}]{\setlength{\rightskip}{0pt plus 5cm}SERIAL\_\-ISR\_\-DEF (
\begin{DoxyParamCaption}
\item[{USARTC1}]{}
\end{DoxyParamCaption}
)}}
\label{_hardware_serial_8cpp_a88d300f67c4ffadae9d06355b195dccb}
\hypertarget{_hardware_serial_8cpp_ae92bc09145a7c575c384258f8c165d15}{
\index{HardwareSerial.cpp@{HardwareSerial.cpp}!SERIAL\_\-ISR\_\-DEF@{SERIAL\_\-ISR\_\-DEF}}
\index{SERIAL\_\-ISR\_\-DEF@{SERIAL\_\-ISR\_\-DEF}!HardwareSerial.cpp@{HardwareSerial.cpp}}
\subsubsection[{SERIAL\_\-ISR\_\-DEF}]{\setlength{\rightskip}{0pt plus 5cm}SERIAL\_\-ISR\_\-DEF (
\begin{DoxyParamCaption}
\item[{USARTD1}]{}
\end{DoxyParamCaption}
)}}
\label{_hardware_serial_8cpp_ae92bc09145a7c575c384258f8c165d15}
\hypertarget{_hardware_serial_8cpp_a6f12703aafce1cd7c9c6a675076e3472}{
\index{HardwareSerial.cpp@{HardwareSerial.cpp}!SERIAL\_\-ISR\_\-DEF@{SERIAL\_\-ISR\_\-DEF}}
\index{SERIAL\_\-ISR\_\-DEF@{SERIAL\_\-ISR\_\-DEF}!HardwareSerial.cpp@{HardwareSerial.cpp}}
\subsubsection[{SERIAL\_\-ISR\_\-DEF}]{\setlength{\rightskip}{0pt plus 5cm}SERIAL\_\-ISR\_\-DEF (
\begin{DoxyParamCaption}
\item[{USARTF1}]{}
\end{DoxyParamCaption}
)}}
\label{_hardware_serial_8cpp_a6f12703aafce1cd7c9c6a675076e3472}
\hypertarget{_hardware_serial_8cpp_a9dc131346dc4fc2529d04056dff35e02}{
\index{HardwareSerial.cpp@{HardwareSerial.cpp}!SERIAL\_\-ISR\_\-DEF@{SERIAL\_\-ISR\_\-DEF}}
\index{SERIAL\_\-ISR\_\-DEF@{SERIAL\_\-ISR\_\-DEF}!HardwareSerial.cpp@{HardwareSerial.cpp}}
\subsubsection[{SERIAL\_\-ISR\_\-DEF}]{\setlength{\rightskip}{0pt plus 5cm}SERIAL\_\-ISR\_\-DEF (
\begin{DoxyParamCaption}
\item[{USARTF0}]{}
\end{DoxyParamCaption}
)}}
\label{_hardware_serial_8cpp_a9dc131346dc4fc2529d04056dff35e02}
\hypertarget{_hardware_serial_8cpp_a90ede4720358d6763ec23dc1f88e7d32}{
\index{HardwareSerial.cpp@{HardwareSerial.cpp}!SERIAL\_\-ISR\_\-DEF@{SERIAL\_\-ISR\_\-DEF}}
\index{SERIAL\_\-ISR\_\-DEF@{SERIAL\_\-ISR\_\-DEF}!HardwareSerial.cpp@{HardwareSerial.cpp}}
\subsubsection[{SERIAL\_\-ISR\_\-DEF}]{\setlength{\rightskip}{0pt plus 5cm}SERIAL\_\-ISR\_\-DEF (
\begin{DoxyParamCaption}
\item[{USARTE1}]{}
\end{DoxyParamCaption}
)}}
\label{_hardware_serial_8cpp_a90ede4720358d6763ec23dc1f88e7d32}
\hypertarget{_hardware_serial_8cpp_acb9cda6603cb216480642b2a6c07b8dc}{
\index{HardwareSerial.cpp@{HardwareSerial.cpp}!SERIAL\_\-ISR\_\-DEF@{SERIAL\_\-ISR\_\-DEF}}
\index{SERIAL\_\-ISR\_\-DEF@{SERIAL\_\-ISR\_\-DEF}!HardwareSerial.cpp@{HardwareSerial.cpp}}
\subsubsection[{SERIAL\_\-ISR\_\-DEF}]{\setlength{\rightskip}{0pt plus 5cm}SERIAL\_\-ISR\_\-DEF (
\begin{DoxyParamCaption}
\item[{USARTE0}]{}
\end{DoxyParamCaption}
)}}
\label{_hardware_serial_8cpp_acb9cda6603cb216480642b2a6c07b8dc}
\hypertarget{_hardware_serial_8cpp_adc288ae6c74681e69b1e357926c0a3e9}{
\index{HardwareSerial.cpp@{HardwareSerial.cpp}!SERIAL\_\-ISR\_\-DEF@{SERIAL\_\-ISR\_\-DEF}}
\index{SERIAL\_\-ISR\_\-DEF@{SERIAL\_\-ISR\_\-DEF}!HardwareSerial.cpp@{HardwareSerial.cpp}}
\subsubsection[{SERIAL\_\-ISR\_\-DEF}]{\setlength{\rightskip}{0pt plus 5cm}SERIAL\_\-ISR\_\-DEF (
\begin{DoxyParamCaption}
\item[{USARTD0}]{}
\end{DoxyParamCaption}
)}}
\label{_hardware_serial_8cpp_adc288ae6c74681e69b1e357926c0a3e9}
\hypertarget{_hardware_serial_8cpp_aaec4e4f887a958cc22dd447565d7080b}{
\index{HardwareSerial.cpp@{HardwareSerial.cpp}!SetPointer@{SetPointer}}
\index{SetPointer@{SetPointer}!HardwareSerial.cpp@{HardwareSerial.cpp}}
\subsubsection[{SetPointer}]{\setlength{\rightskip}{0pt plus 5cm}static void SetPointer (
\begin{DoxyParamCaption}
\item[{USART\_\-t $\ast$}]{usart, }
\item[{{\bf HardwareSerial} $\ast$}]{p}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}static\mbox{]}}}}
\label{_hardware_serial_8cpp_aaec4e4f887a958cc22dd447565d7080b}


Definition at line 80 of file HardwareSerial.cpp.



Referenced by HardwareSerial::begin(), HardwareSerial::begin2x(), HardwareSerial::end(), TimerCntr::TimerCntr(), and TimerCntr::$\sim$TimerCntr().


\begin{DoxyCode}
{
    // Register this object with the appropriate
    // pointer so that the ISR routines can call p
    // class.
    if(usart == &USARTC0) {
        USARTC0cp = p;
    } else if (usart == &USARTC1) {
        USARTC1cp = p;
    } else if (usart ==  &USARTD0) {
        USARTD0cp = p;
    } else if (usart ==  &USARTD1) {
        USARTD1cp = p;
    } else if (usart ==  &USARTE0) {
        USARTE0cp = p;
    } else if (usart ==  &USARTE1) {
        USARTE1cp = p;
    } else if (usart ==  &USARTF0) {
        USARTF0cp = p;
    } else if (usart ==  &USARTF1) {
        USARTF1cp = p;
    }
}
\end{DoxyCode}
\hypertarget{_hardware_serial_8cpp_ac661d0ebc0efa48a2b2aed9ccf86aa64}{
\index{HardwareSerial.cpp@{HardwareSerial.cpp}!store\_\-char@{store\_\-char}}
\index{store\_\-char@{store\_\-char}!HardwareSerial.cpp@{HardwareSerial.cpp}}
\subsubsection[{store\_\-char}]{\setlength{\rightskip}{0pt plus 5cm}void store\_\-char (
\begin{DoxyParamCaption}
\item[{unsigned char}]{c, }
\item[{{\bf ring\_\-buffer} $\ast$}]{rx\_\-buffer}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{_hardware_serial_8cpp_ac661d0ebc0efa48a2b2aed9ccf86aa64}


Definition at line 66 of file HardwareSerial.cpp.



References ring\_\-buffer::buffer, ring\_\-buffer::head, RX\_\-BUFFER\_\-SIZE, and ring\_\-buffer::tail.



Referenced by HardwareSerial::rxc().


\begin{DoxyCode}
{
    int i = (rx_buffer->head + 1) % RX_BUFFER_SIZE;
    
    // if we should be storing the received character into the location
    // just before the tail (meaning that the head would advance to the
    // current location of the tail), we're about to overflow the buffer
    // and so we don't write the character or advance the head.
    if (i != rx_buffer->tail) {
        rx_buffer->buffer[rx_buffer->head] = c;
        rx_buffer->head = i;
    }
}
\end{DoxyCode}
