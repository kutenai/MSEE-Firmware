\hypertarget{class_port}{
\section{Port Class Reference}
\label{class_port}\index{Port@{Port}}
}


{\ttfamily \#include $<$Port.h$>$}

\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{class_port_a6f90240a1d5bb00b7cb0284134ba3dfc}{Port} (PORT\_\-t $\ast$)
\item 
\hyperlink{class_port_afe166c2a6b10ad34d47472a150366bc1}{$\sim$Port} ()
\item 
void \hyperlink{class_port_a8dd6215565362d65fd4ef159b7b8dc95}{Notify} (\hyperlink{class_port_notify}{PortNotify} $\ast$pClient, uint8\_\-t id)
\item 
void \hyperlink{class_port_ab9841b306c73a2b7a1a7a141da222808}{int0} ()
\item 
void \hyperlink{class_port_ac1ea39cc9b07779045dd218aa2364e25}{int1} ()
\item 
void \hyperlink{class_port_a3c3182388b13059550d19e828959ab37}{SetDir} (uint8\_\-t dir)
\item 
void \hyperlink{class_port_a8edf3efbf5258faa7221109f5cbd5a40}{SetPinsAsInput} (uint8\_\-t mask)
\item 
void \hyperlink{class_port_a15035cc63128ae28294c154527c9d2fe}{SetPinsAsOutput} (uint8\_\-t mask)
\item 
void \hyperlink{class_port_a4c7069d8f3c95c2edbbb5945041c687d}{SetPinsHigh} (uint8\_\-t mask)
\item 
void \hyperlink{class_port_aa0e48b7851cc1352c5e8ddc371351e21}{SetPinsLow} (uint8\_\-t mask)
\item 
uint8\_\-t \hyperlink{class_port_ab13ab1f58e8f17fec681e38872ac56d9}{GetPins} ()
\item 
void \hyperlink{class_port_ae43736d7fff93b93d1d1dac27df64591}{InterruptLevel} (uint8\_\-t num, uint8\_\-t lvl)
\begin{DoxyCompactList}\small\item\em Interrupt control. \item\end{DoxyCompactList}\item 
void \hyperlink{class_port_a638be122540b191c8cb84b61d6363d28}{InterruptMask} (uint8\_\-t num, uint8\_\-t mask)
\item 
void \hyperlink{class_port_ab2f2ecab7c1402a03c87d866a8cd5380}{PinControl} (uint8\_\-t mask, bool bSlewLimit, bool bInverted, PORT\_\-OPC\_\-t OutputConfig, PORT\_\-ISC\_\-t InputSense)
\begin{DoxyCompactList}\small\item\em Pin Control Register. \item\end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
PORT\_\-t $\ast$ \hyperlink{class_port_a1475caa8ec2e667350eae96d4b7a28ac}{\_\-pPort}
\item 
\hyperlink{class_port_notify}{PortNotify} $\ast$ \hyperlink{class_port_ac939fdc751f6e01ce4afcdf97f4598f9}{\_\-pNotifyClient}
\item 
uint8\_\-t \hyperlink{class_port_ac1dae0f3300d4fc57f16f8b548b0e9d7}{\_\-pNotifyID}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
Class to handle the setup and control of a port on the ATxmega. This class will setup the port using the PinControl method. It will also setup and receive interrupts on either int0 or int1. You may set an interrupt mask to determine which pins cause which interrupt. For example, it is possible to have pins 0 and 1 cause interrupts on ISR0, and pins 6 and 7 to interrupt on ISR1. 

Definition at line 26 of file Port.h.



\subsection{Constructor \& Destructor Documentation}
\hypertarget{class_port_a6f90240a1d5bb00b7cb0284134ba3dfc}{
\index{Port@{Port}!Port@{Port}}
\index{Port@{Port}!Port@{Port}}
\subsubsection[{Port}]{\setlength{\rightskip}{0pt plus 5cm}Port::Port (
\begin{DoxyParamCaption}
\item[{PORT\_\-t $\ast$}]{pPort}
\end{DoxyParamCaption}
)}}
\label{class_port_a6f90240a1d5bb00b7cb0284134ba3dfc}


Definition at line 54 of file Port.cpp.



References \_\-pPort, and SetPointer().


\begin{DoxyCode}
{
    _pPort = pPort;
    SetPointer(_pPort,this);
}
\end{DoxyCode}
\hypertarget{class_port_afe166c2a6b10ad34d47472a150366bc1}{
\index{Port@{Port}!$\sim$Port@{$\sim$Port}}
\index{$\sim$Port@{$\sim$Port}!Port@{Port}}
\subsubsection[{$\sim$Port}]{\setlength{\rightskip}{0pt plus 5cm}Port::$\sim$Port (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}
\label{class_port_afe166c2a6b10ad34d47472a150366bc1}


Definition at line 60 of file Port.cpp.



References \_\-pPort, and SetPointer().


\begin{DoxyCode}
{
    SetPointer(_pPort,0);
}
\end{DoxyCode}


\subsection{Member Function Documentation}
\hypertarget{class_port_ab13ab1f58e8f17fec681e38872ac56d9}{
\index{Port@{Port}!GetPins@{GetPins}}
\index{GetPins@{GetPins}!Port@{Port}}
\subsubsection[{GetPins}]{\setlength{\rightskip}{0pt plus 5cm}uint8\_\-t Port::GetPins (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}
\label{class_port_ab13ab1f58e8f17fec681e38872ac56d9}


Definition at line 112 of file Port.cpp.



References \_\-pPort.


\begin{DoxyCode}
{
    return _pPort->IN;
}
\end{DoxyCode}
\hypertarget{class_port_ab9841b306c73a2b7a1a7a141da222808}{
\index{Port@{Port}!int0@{int0}}
\index{int0@{int0}!Port@{Port}}
\subsubsection[{int0}]{\setlength{\rightskip}{0pt plus 5cm}void Port::int0 (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}
\label{class_port_ab9841b306c73a2b7a1a7a141da222808}


Definition at line 71 of file Port.cpp.



References \_\-pNotifyClient, \_\-pNotifyID, \_\-pPort, and PortNotify::PortISR0().


\begin{DoxyCode}
{
    if (_pNotifyClient) {
        _pNotifyClient->PortISR0(_pNotifyID);
    }
    _pPort->INTFLAGS = 0x1;
}
\end{DoxyCode}
\hypertarget{class_port_ac1ea39cc9b07779045dd218aa2364e25}{
\index{Port@{Port}!int1@{int1}}
\index{int1@{int1}!Port@{Port}}
\subsubsection[{int1}]{\setlength{\rightskip}{0pt plus 5cm}void Port::int1 (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}
\label{class_port_ac1ea39cc9b07779045dd218aa2364e25}


Definition at line 79 of file Port.cpp.



References \_\-pNotifyClient, \_\-pNotifyID, \_\-pPort, and PortNotify::PortISR1().


\begin{DoxyCode}
{
    if (_pNotifyClient) {
        _pNotifyClient->PortISR1(_pNotifyID);
    }
    _pPort->INTFLAGS = 0x2;
}
\end{DoxyCode}
\hypertarget{class_port_ae43736d7fff93b93d1d1dac27df64591}{
\index{Port@{Port}!InterruptLevel@{InterruptLevel}}
\index{InterruptLevel@{InterruptLevel}!Port@{Port}}
\subsubsection[{InterruptLevel}]{\setlength{\rightskip}{0pt plus 5cm}void Port::InterruptLevel (
\begin{DoxyParamCaption}
\item[{uint8\_\-t}]{num, }
\item[{uint8\_\-t}]{lvl}
\end{DoxyParamCaption}
)}}
\label{class_port_ae43736d7fff93b93d1d1dac27df64591}


Interrupt control. 



Definition at line 117 of file Port.cpp.



References \_\-pPort.


\begin{DoxyCode}
{
    if (num == 0) {
        _pPort->INTCTRL &= ~(0x3);
        _pPort->INTCTRL |= (lvl & 0x3);
    } else {
        _pPort->INTCTRL &= ~(0xC);
        _pPort->INTCTRL |= (lvl & 0x3) << 2;
    }
}
\end{DoxyCode}
\hypertarget{class_port_a638be122540b191c8cb84b61d6363d28}{
\index{Port@{Port}!InterruptMask@{InterruptMask}}
\index{InterruptMask@{InterruptMask}!Port@{Port}}
\subsubsection[{InterruptMask}]{\setlength{\rightskip}{0pt plus 5cm}void Port::InterruptMask (
\begin{DoxyParamCaption}
\item[{uint8\_\-t}]{num, }
\item[{uint8\_\-t}]{mask}
\end{DoxyParamCaption}
)}}
\label{class_port_a638be122540b191c8cb84b61d6363d28}


Definition at line 128 of file Port.cpp.



References \_\-pPort.


\begin{DoxyCode}
{
    if (num == 0) {
        _pPort->INT0MASK = mask;
    } else {
        _pPort->INT1MASK = mask;
    }
}
\end{DoxyCode}
\hypertarget{class_port_a8dd6215565362d65fd4ef159b7b8dc95}{
\index{Port@{Port}!Notify@{Notify}}
\index{Notify@{Notify}!Port@{Port}}
\subsubsection[{Notify}]{\setlength{\rightskip}{0pt plus 5cm}void Port::Notify (
\begin{DoxyParamCaption}
\item[{{\bf PortNotify} $\ast$}]{pClient, }
\item[{uint8\_\-t}]{id}
\end{DoxyParamCaption}
)}}
\label{class_port_a8dd6215565362d65fd4ef159b7b8dc95}


Definition at line 65 of file Port.cpp.



References \_\-pNotifyClient, and \_\-pNotifyID.


\begin{DoxyCode}
{
    _pNotifyClient  = pClient;
    _pNotifyID      = id;
}
\end{DoxyCode}
\hypertarget{class_port_ab2f2ecab7c1402a03c87d866a8cd5380}{
\index{Port@{Port}!PinControl@{PinControl}}
\index{PinControl@{PinControl}!Port@{Port}}
\subsubsection[{PinControl}]{\setlength{\rightskip}{0pt plus 5cm}void Port::PinControl (
\begin{DoxyParamCaption}
\item[{uint8\_\-t}]{mask, }
\item[{bool}]{bSlewLimit, }
\item[{bool}]{bInverted, }
\item[{PORT\_\-OPC\_\-t}]{OutputConfig, }
\item[{PORT\_\-ISC\_\-t}]{InputSense}
\end{DoxyParamCaption}
)}}
\label{class_port_ab2f2ecab7c1402a03c87d866a8cd5380}


Pin Control Register. 



The MPCMASK is a neat feature. I set each of the bits of the mask high, then configure any of the PINxCTRL registers, and only the pins specified in the mask get configured. Also, they all get the same config, so it's faster. It does not matter if I am actually configuring pin 0 or not, even though I specify PN0CTRL. 



Definition at line 137 of file Port.cpp.



References \_\-pPort.


\begin{DoxyCode}
{
    PORTCFG.MPCMASK = mask;
    _pPort->PIN0CTRL = 
        (bSlewLimit ? 0x80 : 0x0) |
        (bInverted ? 0x40 : 0x0)  |
        OutputConfig | 
        InputSense
        ;
}
\end{DoxyCode}
\hypertarget{class_port_a3c3182388b13059550d19e828959ab37}{
\index{Port@{Port}!SetDir@{SetDir}}
\index{SetDir@{SetDir}!Port@{Port}}
\subsubsection[{SetDir}]{\setlength{\rightskip}{0pt plus 5cm}void Port::SetDir (
\begin{DoxyParamCaption}
\item[{uint8\_\-t}]{dir}
\end{DoxyParamCaption}
)}}
\label{class_port_a3c3182388b13059550d19e828959ab37}


Definition at line 87 of file Port.cpp.



References \_\-pPort.


\begin{DoxyCode}
{
    _pPort->DIR = dir;
}
\end{DoxyCode}
\hypertarget{class_port_a8edf3efbf5258faa7221109f5cbd5a40}{
\index{Port@{Port}!SetPinsAsInput@{SetPinsAsInput}}
\index{SetPinsAsInput@{SetPinsAsInput}!Port@{Port}}
\subsubsection[{SetPinsAsInput}]{\setlength{\rightskip}{0pt plus 5cm}void Port::SetPinsAsInput (
\begin{DoxyParamCaption}
\item[{uint8\_\-t}]{mask}
\end{DoxyParamCaption}
)}}
\label{class_port_a8edf3efbf5258faa7221109f5cbd5a40}


Definition at line 92 of file Port.cpp.



References \_\-pPort.


\begin{DoxyCode}
{
    _pPort->DIRCLR = mask;
}
\end{DoxyCode}
\hypertarget{class_port_a15035cc63128ae28294c154527c9d2fe}{
\index{Port@{Port}!SetPinsAsOutput@{SetPinsAsOutput}}
\index{SetPinsAsOutput@{SetPinsAsOutput}!Port@{Port}}
\subsubsection[{SetPinsAsOutput}]{\setlength{\rightskip}{0pt plus 5cm}void Port::SetPinsAsOutput (
\begin{DoxyParamCaption}
\item[{uint8\_\-t}]{mask}
\end{DoxyParamCaption}
)}}
\label{class_port_a15035cc63128ae28294c154527c9d2fe}


Definition at line 97 of file Port.cpp.



References \_\-pPort.


\begin{DoxyCode}
{
    _pPort->DIRSET = mask;
}
\end{DoxyCode}
\hypertarget{class_port_a4c7069d8f3c95c2edbbb5945041c687d}{
\index{Port@{Port}!SetPinsHigh@{SetPinsHigh}}
\index{SetPinsHigh@{SetPinsHigh}!Port@{Port}}
\subsubsection[{SetPinsHigh}]{\setlength{\rightskip}{0pt plus 5cm}void Port::SetPinsHigh (
\begin{DoxyParamCaption}
\item[{uint8\_\-t}]{mask}
\end{DoxyParamCaption}
)}}
\label{class_port_a4c7069d8f3c95c2edbbb5945041c687d}


Definition at line 102 of file Port.cpp.



References \_\-pPort.


\begin{DoxyCode}
{
    _pPort->OUTSET = mask;
}
\end{DoxyCode}
\hypertarget{class_port_aa0e48b7851cc1352c5e8ddc371351e21}{
\index{Port@{Port}!SetPinsLow@{SetPinsLow}}
\index{SetPinsLow@{SetPinsLow}!Port@{Port}}
\subsubsection[{SetPinsLow}]{\setlength{\rightskip}{0pt plus 5cm}void Port::SetPinsLow (
\begin{DoxyParamCaption}
\item[{uint8\_\-t}]{mask}
\end{DoxyParamCaption}
)}}
\label{class_port_aa0e48b7851cc1352c5e8ddc371351e21}


Definition at line 107 of file Port.cpp.



References \_\-pPort.


\begin{DoxyCode}
{
    _pPort->OUTCLR = mask;
}
\end{DoxyCode}


\subsection{Member Data Documentation}
\hypertarget{class_port_ac939fdc751f6e01ce4afcdf97f4598f9}{
\index{Port@{Port}!\_\-pNotifyClient@{\_\-pNotifyClient}}
\index{\_\-pNotifyClient@{\_\-pNotifyClient}!Port@{Port}}
\subsubsection[{\_\-pNotifyClient}]{\setlength{\rightskip}{0pt plus 5cm}{\bf PortNotify}$\ast$ {\bf Port::\_\-pNotifyClient}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{class_port_ac939fdc751f6e01ce4afcdf97f4598f9}


Definition at line 30 of file Port.h.



Referenced by int0(), int1(), and Notify().

\hypertarget{class_port_ac1dae0f3300d4fc57f16f8b548b0e9d7}{
\index{Port@{Port}!\_\-pNotifyID@{\_\-pNotifyID}}
\index{\_\-pNotifyID@{\_\-pNotifyID}!Port@{Port}}
\subsubsection[{\_\-pNotifyID}]{\setlength{\rightskip}{0pt plus 5cm}uint8\_\-t {\bf Port::\_\-pNotifyID}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{class_port_ac1dae0f3300d4fc57f16f8b548b0e9d7}


Definition at line 31 of file Port.h.



Referenced by int0(), int1(), and Notify().

\hypertarget{class_port_a1475caa8ec2e667350eae96d4b7a28ac}{
\index{Port@{Port}!\_\-pPort@{\_\-pPort}}
\index{\_\-pPort@{\_\-pPort}!Port@{Port}}
\subsubsection[{\_\-pPort}]{\setlength{\rightskip}{0pt plus 5cm}PORT\_\-t$\ast$ {\bf Port::\_\-pPort}\hspace{0.3cm}{\ttfamily  \mbox{[}protected\mbox{]}}}}
\label{class_port_a1475caa8ec2e667350eae96d4b7a28ac}


Definition at line 29 of file Port.h.



Referenced by GetPins(), int0(), int1(), InterruptLevel(), InterruptMask(), PinControl(), Port(), SetDir(), SetPinsAsInput(), SetPinsAsOutput(), SetPinsHigh(), SetPinsLow(), and $\sim$Port().



The documentation for this class was generated from the following files:\begin{DoxyCompactItemize}
\item 
\hyperlink{_port_8h}{Port.h}\item 
\hyperlink{_port_8cpp}{Port.cpp}\end{DoxyCompactItemize}
